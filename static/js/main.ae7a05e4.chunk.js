(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{13:function(e,t,a){e.exports={"error-container":"Error_error-container__3K67-","error-text":"Error_error-text__2dwZr"}},15:function(e,t,a){e.exports={section:"Section_section__RoxOA",container:"Section_container__2GwYb",title:"Section_title__oOh0g"}},16:function(e,t,a){e.exports={form:"Searchbar_form__3SWv7"}},18:function(e,t,a){e.exports={"gallery-item":"ImageGalleryItem_gallery-item__2ygkk","gallery-img":"ImageGalleryItem_gallery-img__2d9EF"}},19:function(e,t,a){e.exports={overlay:"Modal_overlay__2nKXG",modal:"Modal_modal__3XObY"}},20:function(e,t,a){e.exports={gallery:"ImageGalleryList_gallery__1ZH_7",text:"ImageGalleryList_text__31qA2"}},30:function(e,t,a){e.exports={"modal-close":"Button_modal-close__2oi5P",search:"Button_search__3AhhK","load-more":"Button_load-more__2DtS2"}},34:function(e,t,a){e.exports={"modal-img":"ContentForModal_modal-img__2oJk8"}},40:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(5),c=a.n(o),s=(a(40),a(6)),l=a(7),i=(a(41),a(15)),u=a.n(i),m=a(2),j=function(e){e.title;var t=e.children;return Object(m.jsx)("section",{className:u.a.section,children:Object(m.jsx)("div",{className:u.a.container,children:t})})},d=a(0),b=a(31),p=a(35),f=a(9),O=a.n(f),g=Object(p.a)(),x=function(e){var t=e.labelName,a=e.value,r=e.onChange,n=e.type,o=e.name,c=e.pattern,s=e.title,l=e.placeholderValue,i=e.autoComplete,u=e.autoFocus;return Object(m.jsxs)("div",{className:"filter"===o?O.a.filterComponent:O.a.formComponent,children:[t&&Object(m.jsxs)("label",{htmlFor:g,className:O.a.formLabel,children:[t,":"]}),Object(m.jsx)("input",{className:O.a.formInput,id:g,value:a,onChange:r,type:n,name:o,pattern:c,title:s,placeholder:l,autoComplete:i,autoFocus:u})]})},h=x;x.defaultProps={type:"text",autoFocus:!1};var _=a(30),y=a.n(_),v=function(e){var t=e.type,a=e.text,r=e.onClick,n=e.className;return Object(m.jsx)("button",{onClick:r||void 0,type:t,className:y.a[n],children:a})},N=v;v.defaultProps={type:"button",onClick:void 0};var C=a(16),k=a.n(C),w=function(e){var t=Object(r.useState)(""),a=Object(s.a)(t,2),n=a[0],o=a[1];return Object(m.jsxs)("form",{className:k.a.form,onSubmit:function(t){t.preventDefault(),""===n.trim()&&l.b.warn("Please, enter your request"),e.onSubmit(n),o("")},children:[Object(m.jsx)(h,{value:n,onChange:function(e){o(e.target.value)},type:"text",placeholderValue:"Search images and photos",autoFocus:!0,autoComplete:"off"}),Object(m.jsx)(N,{type:"submit",text:Object(m.jsx)(d.b.Provider,{value:{color:"rgb(21, 180, 243)",className:"search-icon",size:"20px"},children:Object(m.jsx)("span",{className:k.a["button-label"],children:Object(m.jsx)(b.a,{})})}),className:"search"})]})},I=a(21),S=a(4),E=a(32),F=a(17),L=a.n(F),M=a(33),G=a.n(M).a.create({baseURL:"https://pixabay.com/api/",params:{key:"24480883-e3616999421f7f8a627deaac2",image_type:"photo",orientation:"horizontal",per_page:12}}),P=function(e,t){return G.get("/",{params:{q:e,page:t}})},B=a(18),A=a.n(B),D=function(e){var t=e.imageData,a=e.onClick;return t.map((function(e){return Object(m.jsx)("li",{className:A.a["gallery-item"],onClick:function(){return a(e.id)},children:Object(m.jsx)("img",{src:e.webformatURL,alt:e.tags,className:A.a["gallery-img"]})},e.id)}))},R=a(19),U=a.n(R),q=document.getElementById("modal-root"),J=function(e){var t=e.closeModal,a=e.children;function n(e){if("Escape"===e.code)return t();e.currentTarget===e.target&&t()}return Object(r.useEffect)((function(){return window.addEventListener("keydown",n),function(){window.addEventListener("keydown",n)}}),[]),Object(o.createPortal)(Object(m.jsx)("div",{className:U.a.overlay,onClick:n,children:Object(m.jsxs)("div",{className:U.a.modal,children:[Object(m.jsx)(N,{type:"button",text:"\ud83d\uddd9",onClick:n,className:"modal-close"}),a]})}),q)},K=a(34),z=a.n(K),H=function(e){var t=e.largeImageURL,a=e.tags;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("img",{src:t,alt:a,className:z.a["modal-img"]})})},Q=a(13),V=a.n(Q),W=function(e){var t=e.error;return Object(m.jsxs)("div",{className:V.a["error-container"],children:[Object(m.jsx)("img",{src:"https://icons.iconarchive.com/icons/gakuseisean/ivista-2/128/Alarm-Error-icon.png",alt:"error",width:"50",className:V.a["error-img"]}),Object(m.jsxs)("p",{className:V.a["error-text"],children:[Object(m.jsx)("span",{children:"Error: "}),t]})]})},X=a(65),Y=function(){return Object(m.jsx)(X.a,{style:{color:"rgb(21, 180, 243)",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})},Z=a(20),T=a.n(Z),$=function(e){var t=e.propsQuery,a=Object(r.useState)({gallery:[],page:1,totalImages:0,status:"idle",modalOpen:!1,modalObj:{},error:""}),n=Object(s.a)(a,2),o=n[0],c=n[1],i=o.totalImages,u=o.error,j=o.status,d=o.modalOpen,b=o.modalObj,p=o.gallery,f=o.page;function O(e){return g.apply(this,arguments)}function g(){return(g=Object(E.a)(L.a.mark((function e(a){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(t,f);case 3:(r=e.sent).data.hits.length||l.b.error("Sorry we can't find anything("),c(Object(S.a)(Object(S.a)({},o),{},{totalImages:r.data.totalHits,status:"resolved",gallery:[].concat(Object(I.a)(a),Object(I.a)(r.data.hits))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c(Object(S.a)(Object(S.a)({},o),{},{error:e.t0.message,status:"rejected"}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){t&&O([])}),[t]),Object(r.useEffect)((function(){t&&O(p)}),[f]);var x=Math.ceil(i/12);return Object(m.jsxs)(m.Fragment,{children:["pending"===j&&Object(m.jsx)(Y,{}),"rejected"===j&&Object(m.jsx)(W,{error:u}),d&&Object(m.jsx)(J,{closeModal:function(){c(Object(S.a)(Object(S.a)({},o),{},{modalOpen:!1}))},children:Object(m.jsx)(H,Object(S.a)({},b))}),p.length>0&&Object(m.jsx)("ul",{className:T.a.gallery,children:Object(m.jsx)(D,{imageData:p,onClick:function(e){var t=p.find((function(t){return t.id===e}));c(Object(S.a)(Object(S.a)({},o),{},{modalObj:t,modalOpen:!0}))}})}),p.length>0&&f<x&&Object(m.jsx)(N,{type:"button",text:"Load more",onClick:function(){c((function(e){return Object(S.a)(Object(S.a)({},o),{},{page:e.page+1,status:"pending"})}))},className:"load-more"}),f===x&&Object(m.jsx)("p",{className:T.a.text,children:"We're sorry, but you've reached the end of search results."})]})},ee=(a(62),function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(j,{children:Object(m.jsx)(w,{onSubmit:function(e){n(e)}})}),Object(m.jsx)(j,{children:Object(m.jsx)($,{propsQuery:a})}),Object(m.jsx)(l.a,{autoClose:3e3,position:"top-center"})]})});c.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(ee,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={formComponent:"Input_formComponent__1U7-9",formInput:"Input_formInput__3N24-"}}},[[63,1,2]]]);
//# sourceMappingURL=main.ae7a05e4.chunk.js.map